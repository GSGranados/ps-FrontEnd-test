{"mappings":"gBAEIA,EAAAA,SAGEC,EAAWC,SAASC,cAAc,YAClCC,EAAQF,SAASC,cAAc,UAC/BE,EAAUH,SAASC,cAAc,YACjCG,EAAUJ,SAASC,cAAc,qBACjCI,EAAaL,SAASC,cAAc,iBAuI1C,SAAAK,IACEH,EAAQI,UAAUC,OAAO,UACzBN,EAAMK,UAAUC,OAAO,UACvBN,EAAMO,UAAY,GAvIpBT,SAASU,iBAAiB,oBAW1BC,uBACQC,QAAiBC,MAvBR,qBAuBcC,CAC3BC,OAAQ,MACRC,QAAAA,CACEC,OAAQ,sBAGNC,QAAcN,EAASO,OAC7BrB,EAAaoB,QACPE,EAAStB,EAAWuB,KAAI,CAACC,EAAMC,KAAMC,kDAKfC,EALoCF,2HAK1CG,EALoCJ,GASXK,iLAKpBD,EAAKE,kKAKjBF,EAAKG,0BACLH,EAAKE,sHAKJ,IAAVH,GAAyB,IAAVA,EAAU,8LAQGC,EAAKE,6DACKF,EAAKI,SAASC,WACxDL,EAAKI,SAASE,mCA9BlB,IAAwBN,EAAMD,KALwCQ,KAAK,IACzElC,EAASmC,mBAAmB,aAAcd,MApB5CpB,SAASU,iBAAiB,WAAYyB,IACtB,WAAVA,EAAEC,KAAqBlC,EAAMK,UAAU8B,SAAS,WAClD/B,OAGJP,EAASW,iBAAiB,SA2G1BC,eAAyBwB,GACvBA,EAAEG,uBACIC,EAAOJ,EAAEK,OAAOC,QAAQ,qBACzBF,EAAAA,aACCG,EAAOH,EAAKE,QAAQ,kBAAkBE,aAAa,gBACnDC,EAAgB9C,EAAW+C,MAAK,CAACC,EAAGvB,IAAMA,KAAOmB,IAEvDvC,EAAQI,UAAUC,OAAO,UACzBN,EAAMK,UAAUC,OAAO,gBAEjBY,QA7DeM,EA6DckB,8FAzDjBlB,EAAKG,eAAeH,EAAKE,qEACVF,EAAKE,+DACOF,EAAKC,sVAU1CD,EAAKqB,mjCAhBf,IAAuBrB,EA+DrBxB,EAAMgC,mBAAmB,aAAcd,GAEpBpB,SAASC,cAAc,iBAC/BS,iBAAiB,QAASJ,MAzHvCH,EAAQO,iBAAiB,QAASJ,GAClCF,EAAQM,iBAAiB,SAmIzB,cAEiC,MAA7BL,EAAW2C,MAAMC,SACe,YAAhC5C,EAAW2C,MAAME,kBAEjB7C,EAAW2C,MAAMC,QAAU,SAC3B5C,EAAW2C,MAAME,WAAa,UAGhC7C,EAAW2C,MAAMC,QAAU,IAC3B5C,EAAW2C,MAAME,WAAa","sources":["./js/script.js"],"sourcesContent":["//const values and selectors\r\nconst BASE_URL = \"backend/tours.json\"; //BASE URL used to retrieve the tours object (Array)\r\nlet toursArray = []; // Array used to store all the tours retrieved and not rely on fetching the JSON again.\r\n\r\n//selectors\r\nconst products = document.querySelector(\".product\");\r\nconst modal = document.querySelector(\".modal\");\r\nconst overlay = document.querySelector(\".overlay\");\r\nconst menuBtn = document.querySelector(\".header__nav-menu\");\r\nconst mobileMenu = document.querySelector(\".mobile__list\");\r\n\r\n//listeners\r\ndocument.addEventListener(\"DOMContentLoaded\", imageFetchAndRender);\r\ndocument.addEventListener(\"keydown\", (e) => {\r\n  if (e.key === \"Escape\" && !modal.classList.contains(\"hidden\")) {\r\n    closeModal();\r\n  }\r\n});\r\nproducts.addEventListener(\"click\", openModal);\r\noverlay.addEventListener(\"click\", closeModal);\r\nmenuBtn.addEventListener(\"click\", openMenu);\r\n\r\n//Initial Image fetch using the JSON file (Only 1 fetch performed)\r\nasync function imageFetchAndRender() {\r\n  const response = await fetch(BASE_URL, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n    },\r\n  });\r\n  const tours = await response.json();\r\n  toursArray = tours;\r\n  const markup = toursArray.map((tour, i) => generateMarkup(tour, i)).join(\"\");\r\n  products.insertAdjacentHTML(\"afterbegin\", markup);\r\n}\r\n\r\n//initial function to generate Product Markup\r\nfunction generateMarkup(data, index) {\r\n  return `<div class=\"product__card\" data-product=\"${index}\">\r\n      <div class=\"product__cta\">\r\n        <span class=\"product__price\"\r\n          >from <strong class=\"high\">&#36;${data.Price}</strong></span\r\n        >\r\n        <span class=\"product__deal\"\r\n          >you save <strong class=\"deal-high\">10%</strong></span\r\n        >\r\n        <a href=\"#\" title=\"${data.TourName}\" class=\"product__btn\">Book it!</a>\r\n      </div>\r\n      <figure class=\"product__shape\">\r\n        <img\r\n          class=\"product__img\"\r\n          src=\"${data.Photo}\"\r\n          alt=\"${data.TourName}\"\r\n        />\r\n        <figcaption class=\"product__caption\">More Info</figcaption>\r\n      </figure>\r\n      ${\r\n        index === 0 || index === 2\r\n          ? `<p class=\"product__hot\">\r\n          Hot <br />\r\n          <strong class=\"hot-high\">deal</strong>\r\n      </p>`\r\n          : ``\r\n      }\r\n      <div class=\"product__details\">\r\n        <p class=\"product__title\">${data.TourName}</p>\r\n        <p class=\"product__date\">Daily from ${data.schedule.from} to ${\r\n    data.schedule.to\r\n  }</p>\r\n      </div>\r\n    </div>`;\r\n}\r\n\r\n//Function to generate the Markup for the Modal component\r\nfunction generateModal(data) {\r\n  return `\r\n      <div class=\"modal__content\">\r\n      <div class=\"modal__main\">\r\n        <img src=\"${data.Photo}\" alt=\"${data.TourName}\" class=\"modal__img\" />\r\n        <h2 class=\"modal__title\">${data.TourName}</h2>\r\n        <span class=\"modal__price\">from &#36;${data.Price}</span>\r\n      </div>\r\n      <div class=\"modal__details\">\r\n        <button class=\"modal__close\">&times;</button>\r\n        <h2\r\n          class=\"heading-secondary u-margin-bottom-small heading-secondary--modal\"\r\n        >\r\n          Tour Highlights\r\n        </h2>\r\n        <p class=\"modal__description u-margin-bottom-small\">\r\n        ${data.Description}\r\n        </p>\r\n        <form class=\"modal__form\">\r\n          <div class=\"modal__form-container\">\r\n            <div class=\"modal__group\">\r\n              <input\r\n                class=\"modal__input\"\r\n                type=\"number\"\r\n                name=\"passengers\"\r\n                id=\"passengers\"\r\n                placeholder=\"passengers\"\r\n              />\r\n              <label class=\"modal__label\" for=\"passengers\">Passengers</label>\r\n            </div>\r\n            <div class=\"modal__group\">\r\n              <input\r\n                class=\"modal__input\"\r\n                type=\"number\"\r\n                name=\"days\"\r\n                id=\"days\"\r\n                placeholder=\"Tour days\"\r\n              />\r\n              <label class=\"modal__label\" for=\"days\">Tour Days</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal__group\">\r\n            <input class=\"modal__input\" type=\"date\" name=\"date\" id=\"date\" />\r\n          </div>\r\n          <button class=\"modal__button\">Next Steps &rarr;</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\nasync function openModal(e) {\r\n  e.preventDefault();\r\n  const link = e.target.closest(\".product__btn\");\r\n  if (!link) return;\r\n  const card = link.closest(\".product__card\").getAttribute(\"data-product\");\r\n  const productObject = toursArray.find((_, i) => i === +card);\r\n  //Showing the Modal\r\n  overlay.classList.toggle(\"hidden\");\r\n  modal.classList.toggle(\"hidden\");\r\n  //Creating the HTML\r\n  const markup = await generateModal(productObject);\r\n  //Injecting the Element on the Modal\r\n  modal.insertAdjacentHTML(\"afterbegin\", markup);\r\n  //Adding the event listener to the X button\r\n  const modalClose = document.querySelector(\".modal__close\");\r\n  modalClose.addEventListener(\"click\", closeModal);\r\n}\r\n\r\n//Close modal method\r\nfunction closeModal() {\r\n  overlay.classList.toggle(\"hidden\");\r\n  modal.classList.toggle(\"hidden\");\r\n  modal.innerHTML = \"\";\r\n}\r\n\r\n//Function to handle the clicks of the Mobile Menu button\r\nfunction openMenu() {\r\n  if (\r\n    mobileMenu.style.opacity === \"1\" ||\r\n    mobileMenu.style.visibility === \"visible\"\r\n  ) {\r\n    mobileMenu.style.opacity = \"0\";\r\n    mobileMenu.style.visibility = \"hidden\";\r\n    return;\r\n  }\r\n  mobileMenu.style.opacity = \"1\";\r\n  mobileMenu.style.visibility = \"visible\";\r\n}\r\n"],"names":["$9b6a221490f3d7cb48b87a5561c42745$var$toursArray","$9b6a221490f3d7cb48b87a5561c42745$var$products","document","querySelector","$9b6a221490f3d7cb48b87a5561c42745$var$modal","$9b6a221490f3d7cb48b87a5561c42745$var$overlay","$9b6a221490f3d7cb48b87a5561c42745$var$menuBtn","$9b6a221490f3d7cb48b87a5561c42745$var$mobileMenu","$9b6a221490f3d7cb48b87a5561c42745$var$closeModal","classList","toggle","innerHTML","addEventListener","async","response","fetch","$9b6a221490f3d7cb48b87a5561c42745$var$BASE_URL","method","headers","Accept","tours","json","markup","map","tour","i","$9b6a221490f3d7cb48b87a5561c42745$var$generateMarkup","index","data","Price","TourName","Photo","schedule","from","to","join","insertAdjacentHTML","e","key","contains","preventDefault","link","target","closest","card","getAttribute","productObject","find","_","Description","style","opacity","visibility"],"version":3,"file":"index.HASH_REF_faeeb4e3b18cd12f470b0b16ab770a73.js.map"}